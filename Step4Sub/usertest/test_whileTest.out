;IR CODE
;LABEL main
;LINK
;STOREF 7.0 num
;STOREI 100 i
;STOREI 1 j
;STOREF num approx
;LABEL label1
;STOREI 0 $T1
;EQI i $T1 label2
;DIVF num approx $T2
;ADDF approx $T2 $T3
;MULTF 0.5 $T3 $T4
;STOREF $T4 newapprox
;STOREF newapprox approx
;SUBI i 1 $T5
;STOREI $T5 i
;JUMP label1
;LABEL label2
;WRITEF approx
;RET
;tiny code
var i
var j
var newapprox
var approx
var num
label main
move 7.0 num
move 100 i
move 1 j
move num approx
label label1
move 0 r1
compi i r1
jeq label2
move num r2
divr approx r2
move approx r3
addr r2 r3
move 0.5 r4
mulr r3 r4
move r4 newapprox
move newapprox approx
move i r5
subi 1 r5
move r5 i
jmp label1
label label2
sys writer approx
sys halt
